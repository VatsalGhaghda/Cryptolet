{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Button,Input}from\"antd\";import{useNavigate}from\"react-router-dom\";import{toast}from'react-toastify';import{decryptData}from'../utils/passwordManager';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function PasswordLogin(_ref){let{setSeedPhrase,setWallet}=_ref;const navigate=useNavigate();const[password,setPassword]=useState(\"\");const[showRecovery,setShowRecovery]=useState(false);useEffect(()=>{// Check if wallet data exists in local storage\nconst encryptedData=localStorage.getItem(\"encryptedWalletData\");if(!encryptedData){toast.error(\"No wallet found!\");navigate(\"/\");}},[navigate]);const handleLogin=()=>{if(!password){toast.error(\"Please enter your password\");return;}const encryptedData=localStorage.getItem(\"encryptedWalletData\");if(encryptedData){try{const decryptedData=decryptData(encryptedData,password);if(decryptedData&&btoa(password)===decryptedData.hashedPassword){setSeedPhrase(decryptedData.seedPhrase);setWallet(decryptedData.wallet);toast.success(\"Login successful!\");navigate(\"/yourwallet\");}else{toast.error(\"Incorrect password!\");setShowRecovery(true);}}catch(error){toast.error(\"Failed to decrypt wallet data!\");setShowRecovery(true);}}else{toast.error(\"No wallet found!\");navigate(\"/\");}};const handleKeyPress=e=>{if(e.key==='Enter'){handleLogin();}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login to Wallet\"}),/*#__PURE__*/_jsx(Input.Password,{placeholder:\"Enter your password\",value:password,onChange:e=>setPassword(e.target.value),onKeyPress:handleKeyPress,style:{width:\"90%\",marginBottom:\"20px\"}}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleLogin,style:{width:\"90%\",marginBottom:\"20px\"},children:\"Login\"}),showRecovery&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:\"10px 0\"},children:\"Forgot your password?\"}),/*#__PURE__*/_jsx(Button,{type:\"default\",onClick:()=>navigate(\"/recover\"),style:{width:\"90%\"},children:\"Recover with Seed Phrase\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"frontPageBottom\",onClick:()=>navigate(\"/\"),children:\"Back Home\"})]})});}export default PasswordLogin;","map":{"version":3,"names":["React","useState","useEffect","Button","Input","useNavigate","toast","decryptData","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","PasswordLogin","_ref","setSeedPhrase","setWallet","navigate","password","setPassword","showRecovery","setShowRecovery","encryptedData","localStorage","getItem","error","handleLogin","decryptedData","btoa","hashedPassword","seedPhrase","wallet","success","handleKeyPress","e","key","children","className","Password","placeholder","value","onChange","target","onKeyPress","style","width","marginBottom","type","onClick","margin"],"sources":["C:/Users/ASUS/OneDrive/Desktop/PEDALS  UP/Cryptolet/cryptolet/src/components/PasswordLogin.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Button, Input } from \"antd\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from 'react-toastify';\r\nimport { decryptData } from '../utils/passwordManager';\r\n\r\nfunction PasswordLogin({ setSeedPhrase, setWallet }) {\r\n  const navigate = useNavigate();\r\n  const [password, setPassword] = useState(\"\");\r\n  const [showRecovery, setShowRecovery] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check if wallet data exists in local storage\r\n    const encryptedData = localStorage.getItem(\"encryptedWalletData\");\r\n    if (!encryptedData) {\r\n      toast.error(\"No wallet found!\");\r\n      navigate(\"/\");\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleLogin = () => {\r\n    if (!password) {\r\n      toast.error(\"Please enter your password\");\r\n      return;\r\n    }\r\n\r\n    const encryptedData = localStorage.getItem(\"encryptedWalletData\");\r\n    if (encryptedData) {\r\n      try {\r\n        const decryptedData = decryptData(encryptedData, password);\r\n        if (decryptedData && btoa(password) === decryptedData.hashedPassword) {\r\n          setSeedPhrase(decryptedData.seedPhrase);\r\n          setWallet(decryptedData.wallet);\r\n          toast.success(\"Login successful!\");\r\n          navigate(\"/yourwallet\");\r\n        } else {\r\n          toast.error(\"Incorrect password!\");\r\n          setShowRecovery(true);\r\n        }\r\n      } catch (error) {\r\n        toast.error(\"Failed to decrypt wallet data!\");\r\n        setShowRecovery(true);\r\n      }\r\n    } else {\r\n      toast.error(\"No wallet found!\");\r\n      navigate(\"/\");\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleLogin();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"content\">\r\n        <h2>Login to Wallet</h2>\r\n        <Input.Password\r\n          placeholder=\"Enter your password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          onKeyPress={handleKeyPress}\r\n          style={{ width: \"90%\", marginBottom: \"20px\" }}\r\n        />\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={handleLogin}\r\n          style={{ width: \"90%\", marginBottom: \"20px\" }}\r\n        >\r\n          Login\r\n        </Button>\r\n        \r\n        {showRecovery && (\r\n          <>\r\n            <p style={{ margin: \"10px 0\" }}>Forgot your password?</p>\r\n            <Button\r\n              type=\"default\"\r\n              onClick={() => navigate(\"/recover\")}\r\n              style={{ width: \"90%\" }}\r\n            >\r\n              Recover with Seed Phrase\r\n            </Button>\r\n          </>\r\n        )}\r\n        \r\n        <p className=\"frontPageBottom\" onClick={() => navigate(\"/\")}>\r\n          Back Home\r\n        </p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PasswordLogin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}